<div class="boutiques">
  
  <!-- Header Section -->
  <section class="boutiques-header">
    <h1 class="page-title">Nos Boutiques</h1>
    <p class="page-subtitle">Trouvez les parfumeries prÃ¨s de chez vous</p>
  </section>

  <!-- Search Section -->
  <section class="search-section">
    
    <!-- Geolocation button -->
    <button class="geo-btn" (click)="searchNearby()" [disabled]="loading || locationLoading">
      <span class="geo-icon">ğŸ“</span>
      <span *ngIf="!locationLoading">Autour de moi</span>
      <span *ngIf="locationLoading">Localisation...</span>
    </button>

    <!-- Filters -->
    <div class="filters-container">
      
      <!-- City filter -->
      <div class="filter-group">
        <label class="filter-label">Ville</label>
        <select class="filter-select" [(ngModel)]="selectedCity" (change)="applyFilters()">
          <option value="">Toutes les villes</option>
          <option *ngFor="let city of cities" [value]="city">{{ city }}</option>
        </select>
      </div>

      <!-- Brand filter -->
      <div class="filter-group">
        <label class="filter-label">Marque</label>
        <select class="filter-select" [(ngModel)]="selectedBrand" (change)="applyFilters()">
          <option value="">Toutes les marques</option>
          <option *ngFor="let brand of brands" [value]="brand">{{ brand }}</option>
        </select>
      </div>

      <!-- Reset button -->
      <button class="reset-btn" (click)="resetFilters()" *ngIf="selectedCity || selectedBrand || searchMode === 'nearby'">
        RÃ©initialiser
      </button>

    </div>
  </section>

  <!-- Loading -->
  <div class="loading-container" *ngIf="loading">
    <div class="loader"></div>
    <p class="loading-text">Chargement des boutiques...</p>
  </div>

  <!-- Error -->
  <div class="error-container" *ngIf="error && !loading">
    <p class="error-text">{{ error }}</p>
  </div>

  <!-- Results -->
  <section class="results-section" *ngIf="!loading && filteredBoutiques.length > 0">
    <p class="results-count">
      {{ filteredBoutiques.length }} boutique{{ filteredBoutiques.length > 1 ? 's' : '' }}
      <span *ngIf="selectedCity"> Ã  {{ selectedCity }}</span>
      <span *ngIf="searchMode === 'nearby'"> prÃ¨s de vous</span>
    </p>

    <div class="stores-grid">
      <div class="store-card" *ngFor="let boutique of filteredBoutiques">
        
        <div class="store-header">
          <span class="store-icon">{{ getBrandIcon(boutique.brand) }}</span>
          <div class="store-info">
            <h3 class="store-name">{{ boutique.name }}</h3>
            <span class="store-brand">{{ boutique.brand }}</span>
          </div>
          <span class="store-distance" *ngIf="boutique.distance">
            {{ formatDistance(boutique.distance) }}
          </span>
        </div>

        <div class="store-details">
          <p class="store-address">
            <span class="detail-icon">ğŸ“</span>
            {{ boutique.address }}, {{ boutique.postalCode }} {{ boutique.city }}
          </p>
          
          <p class="store-hours" *ngIf="boutique.openingHours">
            <span class="detail-icon">ğŸ•</span>
            {{ boutique.openingHours }}
          </p>
          
          <p class="store-phone" *ngIf="boutique.phone">
            <span class="detail-icon">ğŸ“</span>
            {{ boutique.phone }}
          </p>
        </div>

        <div class="store-actions">
          <button class="action-btn primary" (click)="openMaps(boutique)">
            ğŸ—ºï¸ ItinÃ©raire
          </button>
          
          <button class="action-btn" (click)="callPhone(boutique.phone)" *ngIf="boutique.phone">
            ğŸ“ Appeler
          </button>
          
          <button class="action-btn" (click)="openWebsite(boutique.website)" *ngIf="boutique.website">
            ğŸŒ Site web
          </button>
        </div>

      </div>
    </div>
  </section>

  <!-- Empty state -->
  <div class="empty-state" *ngIf="!loading && !error && filteredBoutiques.length === 0">
    <p>Aucune boutique trouvÃ©e avec ces critÃ¨res</p>
    <button class="reset-btn" (click)="resetFilters()">
      Voir toutes les boutiques
    </button>
  </div>

</div>
